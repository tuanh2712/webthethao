<!DOCTYPE html>
<html>
  <head>
    <title>Quản lý sản phẩm</title>
    <link rel="stylesheet" type="text/css" href=".././admin/admin.css" />
    <link rel="stylesheet" type="text/css" href="./css/responsive.css" />
    <link rel="stylesheet" href="./css/slick.css" />
    <link rel="stylesheet" href="./css/slick-theme.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="./css/owl.carousel.min.css" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="./js/main.js"></script>
    <script src="./js/owl.carousel.min.js"></script>
    <script src="./js/cs.script.js"></script>
  </head>

  <body>
    <!-- Menu bar  -->

    <header>
      <div class="container">
        <div class="logo">
          <img src="../img/logo.png" alt="Logo" />
        </div>
        <nav>
          <ul>
            
            <li><a href="./admin.html">TỔNG QUAN</a></li>
            <li><a href="./product-manage.html">SẢN PHẨM</a></li>
            <li><a href="./manage-category.html">DANH MỤC</a></li>
            <li><a href="./user-manage.html">KHÁCH HÀNG</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- // Menu bar  -->

    <!-- Inner Wrap -->
    <div class="inner-wrap">
      <!-- Slide bar Left  -->
      <ul class="sider">
        <li class="active">
          <div class="inner-icon">
            <i class="fa-solid fa-gauge-high"></i>
          </div>
          <a href="./admin.html">Tổng quan</a>
        </li>
        <li>
          <div class="inner-icon">
            <i class="fa-solid fa-people-group"></i>
          </div>
          <a href="./product-manage.html">Quản lý sản phẩm</a>
        </li>
        <li>
          <div class="inner-icon">
            <i class="fa-solid fa-list"></i>
          </div>
          <a href="./manage-category.html">Quản lý danh mục</a>
        </li>
        <li>
          <div class="inner-icon">
            <i class="fa-brands fa-product-hunt"></i>
          </div>
          <a href="./order-manage.html">Quản lý đơn hàng</a>
        </li>
        <li>
          <div class="inner-icon">
            <i class="fa-solid fa-clipboard-list"></i>
          </div>
          <a href="./user-manage.html">Quản lý người dùng</a>
        </li>
        <li>
          <div class="inner-icon">
            <i class="fa-solid fa-chart-line"></i>
          </div>
          <a href="./content-manage.html">Quản lý nội dung trang</a>
        </li>
        <!-- <li>
                <div class="inner-icon">
                <i class="fa-solid fa-chart-line"></i>
                </div>
                <a href="./statistic.html">Thống kê và báo cáo</a>
            </li> -->
      </ul>
      <!-- Slide bar Left  -->

      <!-- Change Wrap -->
      <div class="change-wrap">
        <h1>Quản lý sản phẩm</h1>

        <!-- Form Thêm/Sửa Sản phẩm -->
        <form id="productForm">
          <h2>Thêm/Sửa sản phẩm</h2>
          <div class="form-group">
            <div class="form-item">
              <label for="productName">Tên sản phẩm</label>
              <input
                type="text"
                id="productName"
                placeholder="Tên sản phẩm"
                required
              />
            </div>

            <div class="form-item">
              <label for="productPrice">Giá</label>
              <input
                type="number"
                id="productPrice"
                placeholder="Giá"
                required
              />
            </div>

            <div class="form-item">
              <label for="productCategory">Danh mục</label>
              <select id="productCategory" required>
                <option value="">Chọn danh mục</option>
                <option value="Giày">Giày</option>
                <option value="Trang phục thể thao">Trang phục thể thao</option>
                <option value="Dụng cụ thể thao">Dụng cụ thể thao</option>
                <option value="Lều ngủ - Túi ngủ">Lều ngủ - Túi ngủ</option>
              </select>
            </div>

            <div class="form-item">
              <label for="productCategory">Kích thước</label>
              <select id="productCategory" required>
                <option value="">Chọn kích thước</option>
                <option value="Size X">X</option>
                <option value="Size M">M</option>
                <option value="Size L">L</option>
              </select>
            </div>

            <div class="form-item">
              <label for="productName">Thêm mô tả</label>
              <input type="text" id="productName" placeholder="" required />
            </div>

            <div class="form-item">
              <label for="productStatus">Trạng thái</label>
              <select id="productStatus" required>
                <option value="Còn hàng">Còn hàng</option>
                <option value="Hết hàng">Hết hàng</option>
              </select>
            </div>

            <div class="form-item">
              <label for="productDiscount">Giảm giá (%)</label>
              <input
                type="number"
                id="productDiscount"
                placeholder="Giảm giá"
              />
            </div>

            <div class="form-item">
              <label for="productImage">Hình ảnh</label>
              <input type="file" id="productImage" accept="image/*" />
            </div>
          </div>

          <div class="form-actions">
            <button type="submit">Lưu sản phẩm</button>
          </div>
        </form>

        <!-- Danh sách Sản phẩm -->
        <div id="productList">
          <h2>Danh sách sản phẩm</h2>
          <div class="product">
            <img src=".././img/giay-co-cao-cho-nu-keen-jasper-mid-wp-xam-3_0062623_4811276f18a64dcc9273aa059583d1a8_1024x1024-removebg-preview.png" alt="Product Image" />
            <div class="product-info">
              <h3>Giày Nike Air Force 1 '07</h3>
              <p>Giá: 2.000.000₫</p>
              <p>Trạng thái: Còn hàng</p>
              <p>Giảm giá: 25%</p>
            </div>
            <div class="product-actions">
              <button class="edit-btn">Sửa</button>
              <button class="delete-btn">Xóa</button>
            </div>
          </div>
        </div>
      </div>
      <!-- Inner Wrap -->
    </div>
    <!-- Main Content -->

    <!-- End Task 1  -->

    <!-- Footer  -->
    <footer class="footer">
      <div class="container">
        <div class="footer-inner padding-top-20 padding-bottom-20">
          <div class="copyright clearfix">
            <div class="container">
              <div class="inner clearfix">
                <div class="row">
                  <div class="col-sm-12 text-center">
                    <span
                      >© Bản quyền thuộc về <b>Nhóm 21</b>
                      <span class="s480-f">|</span> Cung cấp bởi
                      <a
                        href="https://fit.sgu.edu.vn/site/"
                        title="SGU IT"
                        target="_blank"
                        rel="nofollow"
                        style="color: white"
                        >SGU IT</a
                      ></span
                    >
                  </div>
                </div>
              </div>
              <div class="back-to-top show">
                <i class="fa fa-arrow-circle-up"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
      <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function () {
  const productForm = document.getElementById("productForm");
  const productNameInput = document.getElementById("productName");
  const productPriceInput = document.getElementById("productPrice");
  const productCategorySelect = document.getElementById("productCategory");
  const productStatusSelect = document.getElementById("productStatus");
  const productDiscountInput = document.getElementById("productDiscount");
  const productImageInput = document.getElementById("productImage");
  const productList = document.getElementById("productList");
  const formTitle = productForm.querySelector("h2");

  let isEditing = false; // Trạng thái sửa
  let currentEditProduct = null; // Sản phẩm đang sửa

  // Xử lý lưu sản phẩm
  productForm.addEventListener("submit", function (e) {
    e.preventDefault();

    const productName = productNameInput.value;
    const productPrice = productPriceInput.value;
    const productCategory = productCategorySelect.value;
    const productStatus = productStatusSelect.value;
    const productDiscount = productDiscountInput.value;
    const productImage = productImageInput.files[0]
      ? URL.createObjectURL(productImageInput.files[0])
      : "img/default-product.png";

    if (isEditing && currentEditProduct) {
      // Chỉnh sửa sản phẩm
      currentEditProduct.querySelector(".product-info h3").textContent =
        productName;
      currentEditProduct.querySelector(".product-info p:nth-child(2)").textContent =
        `Giá: ${productPrice}₫`;
      currentEditProduct.querySelector(".product-info p:nth-child(3)").textContent =
        `Trạng thái: ${productStatus}`;
      currentEditProduct.querySelector(".product-info p:nth-child(4)").textContent =
        `Giảm giá: ${productDiscount}%`;
      currentEditProduct.querySelector("img").src = productImage;

      alert("Sản phẩm đã được sửa thành công!");
    } else {
      // Thêm sản phẩm mới
      const productHTML = `
        <div class="product">
          <img src="${productImage}" alt="${productName}" />
          <div class="product-info">
            <h3>${productName}</h3>
            <p>Giá: ${productPrice}₫</p>
            <p>Trạng thái: ${productStatus}</p>
            <p>Giảm giá: ${productDiscount}%</p>
          </div>
          <div class="product-actions">
            <button class="edit-btn">Sửa</button>
            <button class="delete-btn">Xóa</button>
          </div>
        </div>
      `;
      productList.insertAdjacentHTML("beforeend", productHTML);
      alert("Sản phẩm đã được thêm thành công!");
    }

    resetForm();
  });

  // Xử lý sự kiện sửa
  productList.addEventListener("click", function (e) {
    if (e.target.classList.contains("edit-btn")) {
      const product = e.target.closest(".product");
      currentEditProduct = product;

      const productName = product.querySelector(".product-info h3").textContent;
      const productPrice = product
        .querySelector(".product-info p:nth-child(2)")
        .textContent.replace("Giá: ", "")
        .replace("₫", "");
      const productStatus = product
        .querySelector(".product-info p:nth-child(3)")
        .textContent.replace("Trạng thái: ", "");
      const productDiscount = product
        .querySelector(".product-info p:nth-child(4)")
        .textContent.replace("Giảm giá: ", "")
        .replace("%", "");

      productNameInput.value = productName;
      productPriceInput.value = productPrice;
      productStatusSelect.value = productStatus;
      productDiscountInput.value = productDiscount;

      isEditing = true;
      formTitle.textContent = "Sửa sản phẩm";
    }
  });

  // Xử lý sự kiện xóa
  productList.addEventListener("click", function (e) {
    if (e.target.classList.contains("delete-btn")) {
      const product = e.target.closest(".product");
      const confirmDelete = confirm("Bạn có chắc chắn muốn xóa sản phẩm này?");
      if (confirmDelete) {
        product.remove();
        alert("Sản phẩm đã được xóa!");
      }
    }
  });

  // Reset form
  function resetForm() {
    productForm.reset();
    isEditing = false;
    currentEditProduct = null;
    formTitle.textContent = "Thêm/Sửa sản phẩm";
  }
});

      </script>
    </footer>

    <!-- Footer  -->
  </body>
</html>
